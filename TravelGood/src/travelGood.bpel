<?xml version="1.0" encoding="UTF-8" ?>
<process
    name="travelGood"
    targetNamespace="http://enterprise.netbeans.org/bpel/TravelGood/travelGood"
    xmlns:tns="http://enterprise.netbeans.org/bpel/TravelGood/travelGood"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:sxt="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Trace" 
    xmlns:sxed="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Editor2"
    xmlns:sxat="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Attachment"
    xmlns:sxeh="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/ErrorHandling" xmlns:ns0="http://TravelGood.ws" xmlns:ns1="http://airline/" xmlns:ns2="http://enterprise.netbeans.org/bpel/WizardCorrelationProperties">
    <import namespace="http://TravelGood.ws" location="TravelGood.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://enterprise.netbeans.org/bpel/AirlineReservationWrapper" location="AirlineReservationWrapper.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://airline/" location="http://localhost:8080/AirlineReservation/AirlineReservation?wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <import namespace="http://enterprise.netbeans.org/bpel/WizardCorrelationProperties" location="WizardCorrelationProperties.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <partnerLinks>
        <partnerLink name="Airline" xmlns:tns="http://enterprise.netbeans.org/bpel/AirlineReservationWrapper" partnerLinkType="tns:AirlineReservationLinkType" partnerRole="AirlineReservationRole"/>
        <partnerLink name="PartnerLink1" xmlns:tns="http://TravelGood.ws" partnerLinkType="tns:TravelGood" myRole="TravelGoodPortTypeRole"/>
    </partnerLinks>
    <variables>
        <variable name="CancelFlightOut2" xmlns:tns="http://airline/" messageType="tns:cancelFlightResponse"/>
        <variable name="CancelFlightOut1" xmlns:tns="http://TravelGood.ws" messageType="tns:CancelFlightOperationResponse"/>
        <variable name="CancelFlightOut" xmlns:tns="http://airline/" messageType="tns:cancelFlightResponse"/>
        <variable name="CancelFlightIn1" xmlns:tns="http://airline/" messageType="tns:cancelFlight"/>
        <variable name="BookFlightOut1" xmlns:tns="http://TravelGood.ws" messageType="tns:BookFlightResponse"/>
        <variable name="BookFlightOut" xmlns:tns="http://airline/" messageType="tns:bookFlightResponse"/>
        <variable name="BookFlightIn1" xmlns:tns="http://airline/" messageType="tns:bookFlight"/>
        <variable name="GetFlightsOut1" xmlns:tns="http://TravelGood.ws" messageType="tns:GetFlightOperationResponse"/>
        <variable name="GetFlightsOut" xmlns:tns="http://airline/" messageType="tns:getFlightsResponse"/>
        <variable name="GetFlightsIn1" xmlns:tns="http://airline/" messageType="tns:getFlights"/>
        <variable name="BookFlightIn" xmlns:tns="http://TravelGood.ws" messageType="tns:BookFlightRequest"/>
        <variable name="CancelFlightIn" xmlns:tns="http://TravelGood.ws" messageType="tns:CancelFlightOperationRequest"/>
        <variable name="CancelHotelIn" xmlns:tns="http://TravelGood.ws" messageType="tns:CancelHotelOperationRequest"/>
        <variable name="BookHotelIn" xmlns:tns="http://TravelGood.ws" messageType="tns:BookHotelOperationRequest"/>
        <variable name="GetFlightsIn" xmlns:tns="http://TravelGood.ws" messageType="tns:GetFlightOperationRequest"/>
        <variable name="GetHotelIn" xmlns:tns="http://TravelGood.ws" messageType="tns:GetHotelRequest"/>
    </variables>
    <correlationSets>
        <correlationSet name="wzrd_set_GetListOfFlights_OnMessage_Pick1_GetFlights" properties="ns2:wzrd_prop_flightDest_string"/>
        <correlationSet name="wzrd_set_GetListOfFlights_OnMessage_Pick1_GetFlights_1" properties="ns2:wzrd_prop_flightStart_string"/>
        <correlationSet name="wzrd_set_GetListOfFlights_OnMessage_Pick1_GetFlights_2" properties="ns2:wzrd_prop_flightDate_string"/>
        <correlationSet name="wzrd_set_Invoke2_OnMessage_Pick1_BookFlight" properties="ns2:wzrd_prop_flightBookingNumber_int"/>
        <correlationSet name="wzrd_set_Invoke6_OnMessage_Pick1_CancelFlight" properties="ns2:wzrd_prop_flightBookingNumber_int"/>
    </correlationSets>
    <sequence>
        <forEach name="ForEach1" parallel="no" counterName="ForEach1Counter">
            <scope name="Scope1">
                <sequence name="Sequence5">
                    <pick name="Pick1">
                        <onMessage partnerLink="PartnerLink1" operation="GetFlights" portType="ns0:TravelGoodOperations">
                            <correlations>
                                <correlation set="wzrd_set_GetListOfFlights_OnMessage_Pick1_GetFlights" initiate="no"/>
                                <correlation set="wzrd_set_GetListOfFlights_OnMessage_Pick1_GetFlights_1" initiate="no"/>
                                <correlation set="wzrd_set_GetListOfFlights_OnMessage_Pick1_GetFlights_2" initiate="no"/>
                            </correlations>
                            <sequence name="GetFlight">
                                <assign name="Assign7">
                                        <copy>
                                                <from variable="GetFlightsIn"/>
                                                    <to variable="GetFlightsIn1"/>
                                            </copy>
                                    </assign>
                                    <invoke name="GetListOfFlights" partnerLink="Airline" operation="getFlights" portType="ns1:AirlineReservation" inputVariable="GetFlightsIn1" outputVariable="GetFlightsOut">
                                        <correlations>
                                            <correlation set="wzrd_set_GetListOfFlights_OnMessage_Pick1_GetFlights" initiate="yes" pattern="request"/>
                                            <correlation set="wzrd_set_GetListOfFlights_OnMessage_Pick1_GetFlights_1" initiate="yes" pattern="request"/>
                                            <correlation set="wzrd_set_GetListOfFlights_OnMessage_Pick1_GetFlights_2" initiate="yes" pattern="request"/>
                                        </correlations>
                                    </invoke>
                                    <assign name="Assign2">
                                        <copy>
                                                <from variable="GetFlightsOut"/>
                                                    <to variable="GetFlightsOut1"/>
                                            </copy>
                                    </assign>
                                    <reply name="SendFlightListToClient" partnerLink="PartnerLink1" operation="GetFlights" portType="ns0:TravelGoodOperations" variable="GetFlightsOut1"/>
                            </sequence>
                        </onMessage>
                        <onMessage partnerLink="PartnerLink1" operation="BookFlight" portType="ns0:TravelGoodOperations">
                            <correlations>
                                <correlation set="wzrd_set_Invoke2_OnMessage_Pick1_BookFlight" initiate="no"/>
                            </correlations>
                            <sequence name="BookFlight">
                                <assign name="Assign8">
                                        <copy>
                                                <from variable="BookFlightIn" part="BookingNumber"/>
                                                    <to variable="BookFlightIn" part="BookingNumber"/>
                                            </copy>
                                            <copy>
                                                <from variable="BookFlightIn" part="Cardinfo"/>
                                                    <to variable="BookFlightIn" part="Cardinfo"/>
                                            </copy>
                                    </assign>
                                    <invoke name="Invoke2" partnerLink="Airline" operation="bookFlight" portType="ns1:AirlineReservation" inputVariable="BookFlightIn1" outputVariable="BookFlightOut">
                                        <correlations>
                                            <correlation set="wzrd_set_Invoke2_OnMessage_Pick1_BookFlight" initiate="yes" pattern="request"/>
                                        </correlations>
                                    </invoke>
                                    <assign name="Assign10">
                                        <copy>
                                                <from variable="BookFlightOut" part="parameters"/>
                                                    <to variable="BookFlightOut1" part="FlightBooked"/>
                                            </copy>
                                    </assign>
                                    <reply name="SendBookFlightConfirmToClient" partnerLink="PartnerLink1" operation="BookFlight" portType="ns0:TravelGoodOperations" variable="BookFlightOut1"/>
                            </sequence>
                        </onMessage>
                        <onMessage partnerLink="PartnerLink1" operation="CancelFlight" portType="ns0:TravelGoodOperations">
                            <correlations>
                                <correlation set="wzrd_set_Invoke6_OnMessage_Pick1_CancelFlight" initiate="no"/>
                            </correlations>
                            <sequence name="CancelFlight">
                                <assign name="Assign11">
                                        <copy>
                                                <from variable="CancelFlightIn"/>
                                                    <to variable="CancelFlightIn1"/>
                                            </copy>
                                    </assign>
                                    <invoke name="Invoke6" partnerLink="Airline" operation="cancelFlight" portType="ns1:AirlineReservation" outputVariable="CancelFlightOut2" inputVariable="CancelFlightIn1">
                                        <correlations>
                                            <correlation set="wzrd_set_Invoke6_OnMessage_Pick1_CancelFlight" initiate="yes" pattern="request"/>
                                        </correlations>
                                    </invoke>
                                    <assign name="Assign6">
                                        <copy>
                                                <from variable="CancelFlightOut1" part="IsDone"/>
                                                    <to variable="CancelFlightOut1"/>
                                            </copy>
                                    </assign>
                                    <reply name="SendCancleFlightConfirmToClient" partnerLink="PartnerLink1" operation="CancelFlight" portType="ns0:TravelGoodOperations" variable="CancelFlightOut1"/>
                            </sequence>
                        </onMessage>
                        <onMessage partnerLink="PartnerLink1" operation="GetHotel" portType="ns0:TravelGoodOperations">
                            <sequence name="GetHotel">
                                <assign name="Assign9"/>
                                    <invoke name="Invoke4"/>
                                    <assign name="Assign1"/>
                                    <reply name="SendHotelListToClient" partnerLink="PartnerLink1" operation="GetHotel" portType="ns0:TravelGoodOperations"/>
                            </sequence>
                        </onMessage>
                        <onMessage partnerLink="PartnerLink1" operation="BookHotel" portType="ns0:TravelGoodOperations">
                            <sequence name="BookHotel">
                                <invoke name="Invoke5"/>
                                    <assign name="Assign3"/>
                                    <reply name="SendBookHotelConfirmToClient" partnerLink="PartnerLink1" operation="BookHotel" portType="ns0:TravelGoodOperations"/>
                            </sequence>
                        </onMessage>
                        <onMessage partnerLink="PartnerLink1" operation="CancelHotel" portType="ns0:TravelGoodOperations">
                            <sequence name="CancelHotel">
                                <assign name="Assign4"/>
                                    <reply name="SendCancelHotelConfirmToClient" partnerLink="PartnerLink1" operation="CancelHotel" portType="ns0:TravelGoodOperations"/>
                            </sequence>
                        </onMessage>
                    </pick>
                </sequence>
            </scope>
        </forEach>
    </sequence>
</process>
